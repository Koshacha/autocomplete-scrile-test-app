{"version":3,"sources":["components/search/SearchBar.tsx","components/search/SearchResults.tsx","components/search/FoundItem.tsx","components/loading/Loading.tsx","utils/routes.ts","components/App.tsx","index.tsx"],"names":["SearchBar","query","inputHandler","className","width","height","viewBox","fill","xmlns","d","name","type","placeholder","value","onChange","SearchResults","children","FoundItem","username","picture","clickHandler","data-testid","tabIndex","onKeyDown","onClick","src","alt","toLowerCase","Loading","stroke","strokeWidth","id","x1","y1","x2","y2","gradientUnits","offset","stopColor","values","dur","repeatCount","App","useState","isLoading","setLoading","setQuery","results","setResults","selectHandler","user","_","find","fetchItems","useCallback","debounce","a","Promise","all","fetch","routes","usersResponse","photosResponse","json","users","images","searchQuery","RegExp","filter","test","map","rest","pic","thumbnailUrl","valueOf","useEffect","trim","length","e","target","el","code","activeNode","document","activeElement","prevNode","previousElementSibling","nextNode","nextElementSibling","blur","focus","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d388c8a5.chunk.js","sourcesContent":["import React, {ChangeEventHandler, FunctionComponent} from \"react\";\r\nimport './SearchBar.scss';\r\n\r\ninterface SearchBarProps {\r\n  query: string,\r\n  inputHandler: ChangeEventHandler\r\n}\r\n\r\nconst SearchBar: FunctionComponent<SearchBarProps> = ({query= '', inputHandler}) => {\r\n  return (\r\n    <div className=\"search\">\r\n      <button className=\"search__button\">\r\n        <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path d=\"M12.5 11H11.71L11.43 10.73C12.63 9.33 13.25 7.42 12.91 5.39C12.44 2.61 10.12 0.39 7.32002 0.05C3.09002 -0.47 -0.469985 3.09 0.0500152 7.32C0.390015 10.12 2.61002 12.44 5.39002 12.91C7.42002 13.25 9.33002 12.63 10.73 11.43L11 11.71V12.5L15.25 16.75C15.66 17.16 16.33 17.16 16.74 16.75C17.15 16.34 17.15 15.67 16.74 15.26L12.5 11ZM6.50002 11C4.01002 11 2.00002 8.99 2.00002 6.5C2.00002 4.01 4.01002 2 6.50002 2C8.99002 2 11 4.01 11 6.5C11 8.99 8.99002 11 6.50002 11Z\" fill=\"#656667\"/>\r\n        </svg>\r\n      </button>\r\n      <div className=\"search__field-inner\">\r\n        <input className=\"search__input\" name=\"q\" type=\"text\" placeholder=\"Search\" value={query} onChange={inputHandler} />\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default SearchBar;\r\n","import {FunctionComponent} from \"react\";\r\nimport './SearchResults.scss';\r\n\r\nconst SearchResults: FunctionComponent = ({children }) => {\r\n    return (\r\n      <div className=\"list\">\r\n        {children}\r\n      </div>\r\n    );\r\n};\r\n\r\nexport default SearchResults;\r\n","import React, {FunctionComponent, KeyboardEventHandler, MouseEventHandler} from \"react\";\r\n\r\nexport interface IFoundItemProps {\r\n  name: string,\r\n  username: string,\r\n  picture: string,\r\n  inputHandler: KeyboardEventHandler,\r\n  clickHandler: MouseEventHandler\r\n}\r\n\r\nconst FoundItem: FunctionComponent<IFoundItemProps> = ({\r\n  name,\r\n  username,\r\n  picture,\r\n  inputHandler,\r\n  clickHandler}) => {\r\n    return (\r\n      <div\r\n        className=\"list__item\"\r\n        data-testid=\"item\"\r\n        tabIndex={0}\r\n        onKeyDown={inputHandler}\r\n        onClick={clickHandler}\r\n      >\r\n        <div className=\"list__picture\">\r\n          <img src={picture} alt={name}/>\r\n        </div>\r\n        <div className=\"list__inner\">\r\n          <div className=\"list__title\">{name}</div>\r\n          <div className=\"list__subtitle\">@{username.toLowerCase()}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n};\r\n\r\nexport default FoundItem;\r\n","import React, {FunctionComponent} from \"react\";\r\nimport './loading.scss';\r\n\r\nconst Loading: FunctionComponent = () => {\r\n  return (\r\n    <div className=\"list__loading\">\r\n      <div className=\"loading\">\r\n        <svg width=\"76\" height=\"76\" viewBox=\"0 0 76 76\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path d=\"M38 74C18.1178 74 2 57.8822 2 38C2 18.1178 18.1178 2 38 2C57.8822 2 74 18.1178 74 38C74 45.4006 71.7669 52.2796 67.9378 58\" stroke=\"url(#paint0_linear)\" strokeWidth=\"3\"/>\r\n          <defs>\r\n            <linearGradient id=\"paint0_linear\" x1=\"2\" y1=\"38\" x2=\"74\" y2=\"38\" gradientUnits=\"userSpaceOnUse\">\r\n              <stop offset=\"0%\" stopColor=\"#FF6647\">\r\n                <animate values=\"#FF6647; #D6008F\" dur=\"1s\" repeatCount=\"indefinite\"></animate>\r\n              </stop>\r\n              <stop offset=\"100%\" stopColor=\"#D6008F\">\r\n                <animate values=\"#D6008F; #FF6647\" dur=\"1s\" repeatCount=\"indefinite\"></animate>\r\n              </stop>\r\n            </linearGradient>\r\n          </defs>\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Loading;\r\n","export default {\r\n    users: () => 'https://jsonplaceholder.typicode.com/users',\r\n    photos: (id = '') => `https://jsonplaceholder.typicode.com/photos/${id}`\r\n};","import React, {FunctionComponent, useState, useEffect, useCallback} from \"react\";\nimport SearchBar from \"./search/SearchBar\";\nimport SearchResults from \"./search/SearchResults\";\nimport FoundItem from \"./search/FoundItem\";\nimport Loading from \"./loading/Loading\";\nimport routes from \"../utils/routes\";\nimport _, {debounce} from \"lodash\";\nimport IUser from '../interfaces/IUser';\n\nconst App: FunctionComponent = () => {\n  const [isLoading, setLoading] = useState(false);\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState<IUser[]>([]);\n\n  const onChangeHandler = (e: React.ChangeEvent<HTMLInputElement>): void => {\n    setQuery(e.target.value);\n  };\n\n  const selectHandler = (id: number) => () => {\n    const user = _.find(results,{ id });\n    user && setQuery(user.name);\n  };\n\n  const keyPressHandler = (id: number) => ( { code }: React.KeyboardEvent<HTMLInputElement>): void => {\n    const activeNode = document.activeElement as HTMLDivElement;\n    const {\n      previousElementSibling: prevNode,\n      nextElementSibling: nextNode\n    } = activeNode;\n\n    if (code === 'ArrowDown' && nextNode) {\n      activeNode.blur();\n      (nextNode as HTMLDivElement).focus();\n    } else if (code === 'ArrowUp' && prevNode) {\n      activeNode.blur();\n      (prevNode as HTMLDivElement).focus();\n    } else if (code === 'Enter') {\n      selectHandler(id)();\n    }\n  };\n\n  const fetchItems = useCallback(\n    debounce(async (query) => {\n      const [usersResponse, photosResponse] = await Promise.all([\n        fetch(routes.users()),\n        fetch(routes.photos())\n      ]);\n\n      let users = await usersResponse.json();\n      let images = await photosResponse.json();\n\n      const searchQuery = new RegExp(query, 'i');\n\n      users = _(users)\n        .filter(({ name, username }) => {\n          return searchQuery.test(name) || searchQuery.test(username);\n        })\n        .map(({ id, ...rest }) => {\n          const pic = _(images).find({ id });\n          return {\n            id,\n            picture: pic.thumbnailUrl,\n            ...rest\n          };\n        })\n        .valueOf();\n\n      setResults(users);\n      setLoading(false);\n    }, 500),\n    []\n  );\n\n  useEffect(() => {\n    const searchQuery = query.trim();\n    if (searchQuery.length) {\n      setLoading(true);\n      fetchItems(searchQuery);\n    } else {\n      setLoading(false);\n    }\n  }, [query]);\n\n  return (\n    <div className=\"search-app\">\n      <SearchBar\n        query={query}\n        inputHandler={onChangeHandler} />\n      {\n        isLoading ? <Loading/> : (\n          query.length > 0 && <SearchResults>\n            {\n              results.map((el: IUser) => {\n                return <FoundItem\n                  key={el.id}\n                  name={el.name}\n                  username={el.username}\n                  picture={el.picture}\n                  inputHandler={keyPressHandler(el.id)}\n                  clickHandler={selectHandler(el.id)}\n                />\n              })\n            }\n          </SearchResults>\n        )\n      }\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}